{"id":"../.history/src/services/files_20191031151748.ts","dependencies":[{"name":"C:\\Users\\nico\\Documents\\Code\\mooieman\\tsconfig.json","includedInParent":true,"mtime":1572527424680},{"name":"C:\\Users\\nico\\Documents\\Code\\mooieman\\src\\package.json","includedInParent":true,"mtime":1572482141418}],"generated":{"js":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ramda_1 = require(\"ramda\");\n\nexports.getFiles = function (bucket) {\n  return function (query) {\n    return bucket.getFiles(query);\n  };\n};\n\nvar toPrefix = function (query) {\n  return __assign(__assign({}, query), {\n    prefix: query.type + \"/\" + query.type + (query.id ? query.id.padStart(4, '0') : '')\n  });\n};\n\nexports.getFile = function (bucket) {\n  return function (fileName) {\n    return bucket.file(fileName);\n  };\n}; // export const getFileByPrefix: getFileByPrefix = bucket => composeWith(getFilesByPrefix)([\n//     (files)=>getFile(files[0].name\n// ])\n// export const getFilesByPrefix: getFilesByPrefix = bucket => query => getFiles(bucket)(toPrefix(query))\n\n\nexports.getFilesByPrefix = function (bucket) {\n  return ramda_1.composeWith(toPrefix)([exports.getFiles(bucket)]);\n};"},"sourceMaps":{"js":{"mappings":[{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":21,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":21,"column":4}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":21,"column":11}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":21,"column":14}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":21,"column":21}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":21,"column":22}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":21,"column":29}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":21,"column":30}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":23,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":23,"column":7}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":23,"column":8}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":23,"column":16}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":34},"generated":{"line":23,"column":19}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":34},"generated":{"line":23,"column":29}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":34},"generated":{"line":23,"column":35}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":40},"generated":{"line":23,"column":37}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":44},"generated":{"line":24,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":44},"generated":{"line":24,"column":9}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":44},"generated":{"line":24,"column":19}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":44},"generated":{"line":24,"column":24}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":49},"generated":{"line":24,"column":26}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":53},"generated":{"line":25,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":53},"generated":{"line":25,"column":11}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":59},"generated":{"line":25,"column":17}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":11,"column":5},"generated":{"line":25,"column":18}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":53},"generated":{"line":25,"column":26}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":25,"column":27}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":53},"generated":{"line":25,"column":32}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":53},"generated":{"line":25,"column":33}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":11,"column":20},"generated":{"line":26,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":44},"generated":{"line":26,"column":3}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":11,"column":20},"generated":{"line":27,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":27,"column":1}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":29,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":6},"generated":{"line":29,"column":4}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":14},"generated":{"line":29,"column":12}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":27},"generated":{"line":29,"column":15}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":28},"generated":{"line":29,"column":25}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":27},"generated":{"line":29,"column":30}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":33},"generated":{"line":29,"column":32}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":9}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":17}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":18}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":26}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":27}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":29}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":43},"generated":{"line":30,"column":31}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":36}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":30,"column":37}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":48},"generated":{"line":30,"column":39}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":50},"generated":{"line":31,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":50},"generated":{"line":31,"column":4}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":56},"generated":{"line":31,"column":10}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":60},"generated":{"line":31,"column":12}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":65},"generated":{"line":31,"column":17}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":66},"generated":{"line":31,"column":18}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":60},"generated":{"line":31,"column":22}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":70},"generated":{"line":31,"column":25}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":60},"generated":{"line":31,"column":28}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":74},"generated":{"line":31,"column":31}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":79},"generated":{"line":31,"column":36}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":80},"generated":{"line":31,"column":37}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":60},"generated":{"line":31,"column":41}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":87},"generated":{"line":31,"column":45}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":92},"generated":{"line":31,"column":50}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":93},"generated":{"line":31,"column":51}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":87},"generated":{"line":31,"column":53}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":98},"generated":{"line":31,"column":56}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":103},"generated":{"line":31,"column":61}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":104},"generated":{"line":31,"column":62}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":98},"generated":{"line":31,"column":64}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":107},"generated":{"line":31,"column":65}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":98},"generated":{"line":31,"column":73}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":116},"generated":{"line":31,"column":74}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":98},"generated":{"line":31,"column":75}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":119},"generated":{"line":31,"column":77}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":98},"generated":{"line":31,"column":80}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":87},"generated":{"line":31,"column":81}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":126},"generated":{"line":31,"column":84}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":60},"generated":{"line":31,"column":86}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":48},"generated":{"line":32,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":32,"column":3}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":38},"generated":{"line":32,"column":4}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":132},"generated":{"line":33,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":33,"column":1}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":35,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":35,"column":7}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":35,"column":8}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":35,"column":15}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":32},"generated":{"line":35,"column":18}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":32},"generated":{"line":35,"column":28}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":32},"generated":{"line":35,"column":34}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":38},"generated":{"line":35,"column":36}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":42},"generated":{"line":36,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":42},"generated":{"line":36,"column":9}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":42},"generated":{"line":36,"column":19}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":42},"generated":{"line":36,"column":27}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":50},"generated":{"line":36,"column":29}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":37,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":37,"column":11}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":60},"generated":{"line":37,"column":17}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":16,"column":9},"generated":{"line":37,"column":18}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":37,"column":22}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":16,"column":14},"generated":{"line":37,"column":23}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":37,"column":31}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":54},"generated":{"line":37,"column":32}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":16,"column":23},"generated":{"line":38,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":42},"generated":{"line":38,"column":3}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":16,"column":23},"generated":{"line":39,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":39,"column":1}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":39,"column":3}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":40,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":41,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":42,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":13},"generated":{"line":45,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":13},"generated":{"line":45,"column":7}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":13},"generated":{"line":45,"column":8}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":13},"generated":{"line":45,"column":24}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":50},"generated":{"line":45,"column":27}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":50},"generated":{"line":45,"column":37}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":50},"generated":{"line":45,"column":43}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":56},"generated":{"line":45,"column":45}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":46,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":46,"column":9}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":46,"column":16}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":46,"column":17}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":46,"column":28}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":72},"generated":{"line":46,"column":29}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":46,"column":37}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":82},"generated":{"line":46,"column":39}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":83},"generated":{"line":46,"column":40}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":83},"generated":{"line":46,"column":47}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":83},"generated":{"line":46,"column":48}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":83},"generated":{"line":46,"column":56}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":92},"generated":{"line":46,"column":57}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":83},"generated":{"line":46,"column":63}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":82},"generated":{"line":46,"column":64}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":46,"column":65}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":60},"generated":{"line":46,"column":66}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":101},"generated":{"line":47,"column":0}},{"source":"../.history/src/services/files_20191031151748.ts","name":null,"original":{"line":23,"column":13},"generated":{"line":47,"column":1}}],"sources":{"../.history/src/services/files_20191031151748.ts":"import { Bucket, File, GetFilesOptions, GetFilesResponse, GetFileResponse } from '@google-cloud/storage';\r\nimport { composeP, compose, composeWith, pipeWith } from 'ramda';\r\ntype getFiles = (bucket: Bucket) => (query?: GetFilesOptions) => Promise<GetFilesResponse>\r\ntype getFile = (bucket: Bucket) => (fileName: string) => File\r\ntype getFileByPrefix = (bucket: Bucket) => (query: string) => File\r\ntype getFilesByPrefix = (bucket: Bucket) => (query: GetFilesOptionsExtra) => Promise<GetFilesResponse>\r\ninterface GetFilesOptionsExtra extends GetFilesOptions {type: string, id?: string}\r\ntype toPrefix = (options:GetFilesOptionsExtra) => GetFilesOptions\r\n\r\nexport const getFiles: getFiles = bucket => query => bucket\r\n    .getFiles(query)\r\n\r\nconst toPrefix: toPrefix = (query) => ({...query, prefix:`${query.type}/${query.type}${query.id ? query.id.padStart(4, '0') : ''}`})\r\n\r\nexport const getFile: getFile = bucket => fileName => bucket\r\n        .file(fileName)\r\n\r\n// export const getFileByPrefix: getFileByPrefix = bucket => composeWith(getFilesByPrefix)([\r\n//     (files)=>getFile(files[0].name\r\n// ])\r\n\r\n// export const getFilesByPrefix: getFilesByPrefix = bucket => query => getFiles(bucket)(toPrefix(query))\r\nexport const getFilesByPrefix: getFilesByPrefix = bucket => composeWith(toPrefix)([getFiles(bucket)])"},"lineCount":null}},"error":null,"hash":"f27e9adeb43f68af1dfa8b5cbe1189f5","cacheData":{"env":{}}}